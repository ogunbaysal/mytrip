[Drizzle Studio Gateway is now FREE ðŸ‘€](https://gateway.drizzle.team/)

[Documentation](https://orm.drizzle.team/docs/overview)

Search`` `K`

Ask AI

![ai chat avatar](https://orm.drizzle.team/svg/drizzle.svg)

[30k+](https://github.com/drizzle-team/drizzle-orm)

Light

Dark

System

meet drizzle

[Get started](https://orm.drizzle.team/docs/get-started)

[Why Drizzle?](https://orm.drizzle.team/docs/overview) [Guides](https://orm.drizzle.team/docs/guides) [Tutorials](https://orm.drizzle.team/docs/tutorials) [Latest releases](https://orm.drizzle.team/docs/latest-releases) [Gotchas](https://orm.drizzle.team/docs/gotchas)

Fundamentals

[Schema](https://orm.drizzle.team/docs/sql-schema-declaration) [Database connection](https://orm.drizzle.team/docs/connect-overview) [Query data](https://orm.drizzle.team/docs/data-querying) [Migrations](https://orm.drizzle.team/docs/migrations)

Connect

[PostgreSQL](https://orm.drizzle.team/docs/get-started-postgresql) [Gel](https://orm.drizzle.team/docs/get-started-gel) [MySQL](https://orm.drizzle.team/docs/get-started-mysql) [SQLite](https://orm.drizzle.team/docs/get-started-sqlite) [SingleStore](https://orm.drizzle.team/docs/get-started-singlestore)

[Neon](https://orm.drizzle.team/docs/connect-neon) [Vercel Postgres](https://orm.drizzle.team/docs/connect-vercel-postgres) [Prisma Postgres](https://orm.drizzle.team/docs/connect-prisma-postgres) [Supabase](https://orm.drizzle.team/docs/connect-supabase) [Xata](https://orm.drizzle.team/docs/connect-xata) [PGLite](https://orm.drizzle.team/docs/connect-pglite) [Nile](https://orm.drizzle.team/docs/connect-nile) [Bun SQL](https://orm.drizzle.team/docs/connect-bun-sql)

[PlanetScale](https://orm.drizzle.team/docs/connect-planetscale) [TiDB](https://orm.drizzle.team/docs/connect-tidb)

[Turso Cloud](https://orm.drizzle.team/docs/connect-turso) [Turso Database](https://orm.drizzle.team/docs/connect-turso-database) [SQLite Cloud](https://orm.drizzle.team/docs/connect-sqlite-cloud) [Cloudflare D1](https://orm.drizzle.team/docs/connect-cloudflare-d1) [Bun SQLite](https://orm.drizzle.team/docs/connect-bun-sqlite) [Cloudflare Durable Objects](https://orm.drizzle.team/docs/connect-cloudflare-do)

[Expo SQLite](https://orm.drizzle.team/docs/connect-expo-sqlite) [OP SQLite](https://orm.drizzle.team/docs/connect-op-sqlite) [React Native SQLite](https://orm.drizzle.team/docs/connect-react-native-sqlite)

[AWS Data API Postgres](https://orm.drizzle.team/docs/connect-aws-data-api-pg) [AWS Data API MySQL](https://orm.drizzle.team/docs/connect-aws-data-api-mysql)

[Drizzle Proxy](https://orm.drizzle.team/docs/connect-drizzle-proxy)

Expand

Manage schema

[Data types](https://orm.drizzle.team/docs/column-types/pg) [Indexes & Constraints](https://orm.drizzle.team/docs/indexes-constraints) [Sequences](https://orm.drizzle.team/docs/sequences) [Views](https://orm.drizzle.team/docs/views) [Schemas](https://orm.drizzle.team/docs/schemas) [Row-Level Security (RLS)](https://orm.drizzle.team/docs/rls) [Extensions](https://orm.drizzle.team/docs/extensions/pg) [Relations](https://orm.drizzle.team/docs/relations)

Migrations

[Overview](https://orm.drizzle.team/docs/kit-overview) [`generate`](https://orm.drizzle.team/docs/drizzle-kit-generate) [`migrate`](https://orm.drizzle.team/docs/drizzle-kit-migrate) [`push`](https://orm.drizzle.team/docs/drizzle-kit-push) [`pull`](https://orm.drizzle.team/docs/drizzle-kit-pull) [`export`](https://orm.drizzle.team/docs/drizzle-kit-export) [`check`](https://orm.drizzle.team/docs/drizzle-kit-check) [`up`](https://orm.drizzle.team/docs/drizzle-kit-up) [`studio`](https://orm.drizzle.team/docs/drizzle-kit-studio) [Custom migrations](https://orm.drizzle.team/docs/kit-custom-migrations) [Migrations for teams](https://orm.drizzle.team/docs/kit-migrations-for-teams) [Web and mobile](https://orm.drizzle.team/docs/kit-web-mobile) [drizzle.config.ts](https://orm.drizzle.team/docs/drizzle-config-file)

Seeding

[Overview](https://orm.drizzle.team/docs/seed-overview) [Generators](https://orm.drizzle.team/docs/seed-functions) [Versioning](https://orm.drizzle.team/docs/seed-versioning)

Access your data

[Query](https://orm.drizzle.team/docs/rqb) [Select](https://orm.drizzle.team/docs/select) [Insert](https://orm.drizzle.team/docs/insert) [Update](https://orm.drizzle.team/docs/update) [Delete](https://orm.drizzle.team/docs/delete) [Filters](https://orm.drizzle.team/docs/operators) [Utils](https://orm.drizzle.team/docs/query-utils) [Joins](https://orm.drizzle.team/docs/joins) [Magic sql\`\` operator](https://orm.drizzle.team/docs/sql)

Performance

[Queries](https://orm.drizzle.team/docs/perf-queries) [Serverless](https://orm.drizzle.team/docs/perf-serverless)

Advanced

[Set Operations](https://orm.drizzle.team/docs/set-operations) [Generated Columns](https://orm.drizzle.team/docs/generated-columns) [Transactions](https://orm.drizzle.team/docs/transactions) [Batch](https://orm.drizzle.team/docs/batch-api) [Cache](https://orm.drizzle.team/docs/cache) [Dynamic query building](https://orm.drizzle.team/docs/dynamic-query-building) [Read Replicas](https://orm.drizzle.team/docs/read-replicas) [Custom types](https://orm.drizzle.team/docs/custom-types) [Goodies](https://orm.drizzle.team/docs/goodies)

Extensions

[Prisma](https://orm.drizzle.team/docs/prisma) [ESLint Plugin](https://orm.drizzle.team/docs/eslint-plugin) [drizzle-zod](https://orm.drizzle.team/docs/zod) [drizzle-typebox](https://orm.drizzle.team/docs/typebox) [drizzle-valibot](https://orm.drizzle.team/docs/valibot) [drizzle-arktype](https://orm.drizzle.team/docs/arktype) [drizzle-graphql](https://orm.drizzle.team/docs/graphql)

SystemLightDark

[Become a Sponsor](https://driz.link/sponsor) [Twitter](https://mobile.twitter.com/DrizzleORM) [Discord](https://discord.gg/yfjTbVXMW4)

[v1.0\\
\\
75%](https://orm.drizzle.team/roadmap)

[Benchmarks](https://orm.drizzle.team/benchmarks) [Extension](https://driz.link/extension) [Studio](https://orm.drizzle.team/drizzle-studio/overview) [Studio Package](https://github.com/drizzle-team/drizzle-studio-npm) [Gateway](https://gateway.drizzle.team/) [Drizzle Run](https://drizzle.run/)

Our goodies!

[![](<Base64-Image-Removed>)![Gel](<Base64-Image-Removed>)](https://driz.link/edgedb)

[![](<Base64-Image-Removed>)![Xata](<Base64-Image-Removed>)](https://driz.link/xataio)[![](<Base64-Image-Removed>)![Neon](<Base64-Image-Removed>)](https://driz.link/neon)[![](<Base64-Image-Removed>)![Nuxt](<Base64-Image-Removed>)](https://hub.nuxt.com/?utm_source=drizzle-docs)[![](<Base64-Image-Removed>)![SQLite Cloud](<Base64-Image-Removed>)](https://driz.link/sqlitecloud)[![](<Base64-Image-Removed>)![Upstash](<Base64-Image-Removed>)](https://driz.link/upstash)[![](<Base64-Image-Removed>)![Lokalise](<Base64-Image-Removed>)](https://driz.link/lokalise)[![](<Base64-Image-Removed>)![Replit](<Base64-Image-Removed>)](https://driz.link/replit)[![](<Base64-Image-Removed>)![Sentry](<Base64-Image-Removed>)](https://driz.link/sentry)[![](<Base64-Image-Removed>)![Sevalla](<Base64-Image-Removed>)](https://driz.link/sevalla)[![](<Base64-Image-Removed>)![GibsonAI](<Base64-Image-Removed>)](https://driz.link/gibsonai)[![](<Base64-Image-Removed>)![Clerk](<Base64-Image-Removed>)](https://clerk.com/)[![](<Base64-Image-Removed>)![Warp](<Base64-Image-Removed>)](https://driz.link/warp)[![](<Base64-Image-Removed>)![Vercel](<Base64-Image-Removed>)](https://vercel.com/)[![](<Base64-Image-Removed>)![Turso](<Base64-Image-Removed>)\\
\\
ðŸš€ Drizzle is giving you 10% off Turso Scaler and Pro for 1 Year ðŸš€](https://driz.link/turso) [![](<Base64-Image-Removed>)![Payload](<Base64-Image-Removed>)](https://driz.link/payload) [![](<Base64-Image-Removed>)![Sponsor](<Base64-Image-Removed>)](https://driz.link/sponsor)

Product by Drizzle Team

[One Dollar Stats$1 per mo web analytics\\
\\
christmas\\
\\
deal](https://driz.link/onedollarstats)

PostgreSQL

New database

Meet Drizzle

[Get started](https://orm.drizzle.team/docs/get-started)

New database

Existing database

PostgreSQL  Neon  Vercel Postgres  Supabase  Xata  PGLite  Nile  Bun SQL  Gel  MySQL  PlanetScale  TiDB  SingleStore  SQLite  Turso Cloud  SQLite Cloud  Turso Database  Cloudflare D1  Bun SQLite  Cloudflare Durable Objects  Expo SQLite  OP SQLite

# Get Started with Drizzle and PostgreSQL

This guide assumes familiarity with:

- **dotenv** \- package for managing environment variables - [read here](https://www.npmjs.com/package/dotenv)
- **tsx** \- package for running TypeScript files - [read here](https://tsx.is/)
- **node-postgres** \- package for querying your PostgreSQL database - [read here](https://node-postgres.com/)

Drizzle has native support for PostgreSQL connections with the `node-postgres` and `postgres.js` drivers.

We will use `node-postgres` for this get started example. But if you want to find more ways to connect to postgresql check
our [PostgreSQL Connection](https://orm.drizzle.team/docs/get-started-postgresql) page

#### Basic file structure

This is the basic file structure of the project. In the `src/db` directory, we have table definition in `schema.ts`. In `drizzle` folder there are sql migration file and snapshots.

```
ðŸ“¦ <project root>
 â”œ ðŸ“‚ drizzle
 â”œ ðŸ“‚ src
 â”‚   â”œ ðŸ“‚ db
 â”‚   â”‚  â”” ðŸ“œ schema.ts
 â”‚   â”” ðŸ“œ index.ts
 â”œ ðŸ“œ .env
 â”œ ðŸ“œ drizzle.config.ts
 â”œ ðŸ“œ package.json
 â”” ðŸ“œ tsconfig.json
```

#### Step 1 - Install **node-postgres** package

npm

yarn

pnpm

bun

```
npm i drizzle-orm pg dotenv
npm i -D drizzle-kit tsx @types/pg
```

```
yarn add drizzle-orm pg dotenv
yarn add -D drizzle-kit tsx @types/pg
```

```
pnpm add drizzle-orm pg dotenv
pnpm add -D drizzle-kit tsx @types/pg
```

```
bun add drizzle-orm pg dotenv
bun add -D drizzle-kit tsx @types/pg
```

#### Step 2 - Setup connection variables

Create a `.env` file in the root of your project and add your database connection variable:

```
DATABASE_URL=
```

tips

If you donâ€™t have a PostgreSQL database yet and want to create one for testing, you can use our guide on how to set up PostgreSQL in Docker.

The PostgreSQL in Docker guide is available [here](https://orm.drizzle.team/docs/guides/postgresql-local-setup). Go set it up, generate a database URL (explained in the guide), and come back for the next steps

#### Step 3 - Connect Drizzle ORM to the database

Create a `index.ts` file in the `src` directory and initialize the connection:

node-postgres

node-postgres with config

your node-postgres driver

```
import 'dotenv/config';
import { drizzle } from 'drizzle-orm/node-postgres';

const db = drizzle(process.env.DATABASE_URL!);
```

```
import 'dotenv/config';
import { drizzle } from 'drizzle-orm/node-postgres';

// You can specify any property from the node-postgres connection options
const db = drizzle({
  connection: {
    connectionString: process.env.DATABASE_URL!,
    ssl: true
  }
});
```

```
import 'dotenv/config';
import { drizzle } from "drizzle-orm/node-postgres";
import { Pool } from "pg";

const pool = new Pool({
  connectionString: process.env.DATABASE_URL!,
});
const db = drizzle({ client: pool });
```

#### Step 4 - Create a table

Create a `schema.ts` file in the `src/db` directory and declare your table:

src/db/schema.ts

```
import { integer, pgTable, varchar } from "drizzle-orm/pg-core";

export const usersTable = pgTable("users", {
  id: integer().primaryKey().generatedAlwaysAsIdentity(),
  name: varchar({ length: 255 }).notNull(),
  age: integer().notNull(),
  email: varchar({ length: 255 }).notNull().unique(),
});
```

#### Step 5 - Setup Drizzle config file

**Drizzle config** \- a configuration file that is used by [Drizzle Kit](https://orm.drizzle.team/docs/kit-overview) and contains all the information about your database connection, migration folder and schema files.

Create a `drizzle.config.ts` file in the root of your project and add the following content:

drizzle.config.ts

```
import 'dotenv/config';
import { defineConfig } from 'drizzle-kit';

export default defineConfig({
  out: './drizzle',
  schema: './src/db/schema.ts',
  dialect: 'postgresql',
  dbCredentials: {
    url: process.env.DATABASE_URL!,
  },
});
```

#### Step 6 - Applying changes to the database

You can directly apply changes to your database using the `drizzle-kit push` command. This is a convenient method for quickly testing new schema designs or modifications in a local development environment, allowing for rapid iterations without the need to manage migration files:

```
npx drizzle-kit push
```

Read more about the push command in [documentation](https://orm.drizzle.team/docs/drizzle-kit-push).

Tips

Alternatively, you can generate migrations using the `drizzle-kit generate` command and then apply them using the `drizzle-kit migrate` command:

Generate migrations:

```
npx drizzle-kit generate
```

Apply migrations:

```
npx drizzle-kit migrate
```

Read more about migration process in [documentation](https://orm.drizzle.team/docs/kit-overview).

#### Step 7 - Seed and Query the database

Letâ€™s **update** the `src/index.ts` file with queries to create, read, update, and delete users

src/index.ts

```
import 'dotenv/config';
import { drizzle } from 'drizzle-orm/node-postgres';
import { eq } from 'drizzle-orm';
import { usersTable } from './db/schema';

const db = drizzle(process.env.DATABASE_URL!);

async function main() {
  const user: typeof usersTable.$inferInsert = {
    name: 'John',
    age: 30,
    email: 'john@example.com',
  };

  await db.insert(usersTable).values(user);
  console.log('New user created!')

  const users = await db.select().from(usersTable);
  console.log('Getting all users from the database: ', users)
  /*
  const users: {
    id: number;
    name: string;
    age: number;
    email: string;
  }[]
  */

  await db
    .update(usersTable)
    .set({
      age: 31,
    })
    .where(eq(usersTable.email, user.email));
  console.log('User info updated!')

  await db.delete(usersTable).where(eq(usersTable.email, user.email));
  console.log('User deleted!')
}

main();
```

#### Step 8 - Run index.ts file

To run any TypeScript files, you have several options, but letâ€™s stick with one: using `tsx`

Youâ€™ve already installed `tsx`, so we can run our queries now

**Run `index.ts` script**

npm

yarn

pnpm

bun

```
npx tsx src/index.ts
```

```
yarn tsx src/index.ts
```

```
pnpm tsx src/index.ts
```

```
bunx tsx src/index.ts
```

tips

We suggest using `bun` to run TypeScript files. With `bun`, such scripts can be executed without issues or additional
settings, regardless of whether your project is configured with CommonJS (CJS), ECMAScript Modules (ESM), or any other module format.
To run a script with `bun`, use the following command:

```
bun src/index.ts
```

If you donâ€™t have bun installed, check the [Bun installation docs](https://bun.sh/docs/installation#installing)